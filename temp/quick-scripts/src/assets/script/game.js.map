{"version":3,"sources":["assets\\script\\game.js"],"names":["cc","Class","Component","properties","rope_node","type","Node","cow_ins","rope_imgs","SpriteFrame","cow_prefab","Prefab","start","clickCapture","event","customEventDate","active","setSiblingIndex","y","up","moveTo","x","result","callFunc","currentX","log","bgNode","node","getChildByName","removeChild","ropeType","getComponent","randomType","Sprite","spriteFrame","instantiate","addChild","down","finish","sequence","runAction"],"mappings":";;;;;;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,SAAS,EAAC;AACN,iBAAU,IADJ;AAENC,MAAAA,IAAI,EAAGL,EAAE,CAACM;AAFJ,KADF;AAKRC,IAAAA,OAAO,EAAC;AACJ,iBAAS,IADL;AAEJF,MAAAA,IAAI,EAACL,EAAE,CAACM;AAFJ,KALA;AASRE,IAAAA,SAAS,EAAC;AACN,iBAAQ,EADF;AAENH,MAAAA,IAAI,EAACL,EAAE,CAACS;AAFF,KATF;AAcR;AACAC,IAAAA,UAAU,EAAC;AACP,iBAAQ,IADD;AAEPL,MAAAA,IAAI,EAACL,EAAE,CAACW;AAFD;AAfH,GAHP;AAwBL;AAEA;AAEAC,EAAAA,KA5BK,mBA4BI,CAER,CA9BI;AAgCL;AAEA;AACAC,EAAAA,YAAY,EAAC,sBAAUC,KAAV,EAAgBC,eAAhB,EAAgC;AACzC,SAAKX,SAAL,CAAeY,MAAf,GAAsB,IAAtB,CADyC,CAEzC;;AACA,SAAKZ,SAAL,CAAea,eAAf,CAA+B,GAA/B,EAHyC,CAKzC;;AACA,SAAKb,SAAL,CAAec,CAAf,GAAiB,CAAC,GAAlB,CANyC,CAOzC;;AACA,QAAMC,EAAE,GAACnB,EAAE,CAACoB,MAAH,CAAU,GAAV,EAAc,KAAKhB,SAAL,CAAeiB,CAA7B,EAA+B,CAA/B,CAAT,CARyC,CAWzC;;AACA,QAAIC,MAAM,GAACtB,EAAE,CAACuB,QAAH,CAAY,YAAU;AAC7B;AACA,UAAIC,QAAQ,GAAC,KAAKjB,OAAL,CAAac,CAA1B;;AACA,UAAGG,QAAQ,GAAC,CAAC,EAAV,IAAcA,QAAQ,GAAC,EAA1B,EAA6B;AACzBxB,QAAAA,EAAE,CAACyB,GAAH,CAAO,OAAP,EADyB,CAGzB;;AACA,YAAIC,MAAM,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,WAAzB,CAAb;AACAF,QAAAA,MAAM,CAACG,WAAP,CAAmB,KAAKtB,OAAxB,EALyB,CAOzB;;AACA,YAAIuB,QAAQ,GAAC,KAAKvB,OAAL,CAAawB,YAAb,CAA0B,KAA1B,EAAiCC,UAAjC,GAA4C,CAAzD;AACA,aAAK5B,SAAL,CAAe2B,YAAf,CAA4B/B,EAAE,CAACiC,MAA/B,EAAuCC,WAAvC,GAAmD,KAAK1B,SAAL,CAAesB,QAAf,CAAnD,CATyB,CAYzB;;AACA,aAAKvB,OAAL,GAAaP,EAAE,CAACmC,WAAH,CAAe,KAAKzB,UAApB,CAAb;AACA,aAAKH,OAAL,CAAaW,CAAb,GAAe,CAAf;AACAQ,QAAAA,MAAM,CAACU,QAAP,CAAgB,KAAK7B,OAArB;AAGH,OAlBD,MAmBI;AACAP,QAAAA,EAAE,CAACyB,GAAH,CAAO,OAAP;AACH;AACJ,KAzBU,EAyBT,IAzBS,CAAX,CAZyC,CAuCzC;;AACA,QAAIY,IAAI,GAACrC,EAAE,CAACoB,MAAH,CAAU,GAAV,EAAc,KAAKhB,SAAL,CAAeiB,CAA7B,EAA+B,CAAC,GAAhC,CAAT;AAEA,QAAIiB,MAAM,GAACtC,EAAE,CAACuB,QAAH,CAAY,YAAW;AAC9B,WAAKnB,SAAL,CAAe2B,YAAf,CAA4B/B,EAAE,CAACiC,MAA/B,EAAuCC,WAAvC,GAAmD,KAAK1B,SAAL,CAAe,CAAf,CAAnD;AAEH,KAHU,EAGT,IAHS,CAAX,CA1CyC,CAiDzC;;AACA,QAAI+B,QAAQ,GAACvC,EAAE,CAACuC,QAAH,CAAYpB,EAAZ,EAAeG,MAAf,EAAsBe,IAAtB,EAA2BC,MAA3B,CAAb;AAEA,SAAKlC,SAAL,CAAeoC,SAAf,CAAyBD,QAAzB;AACH;AAxFI,CAAT","sourceRoot":"/","sourcesContent":["\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        rope_node:{\r\n            default : null,\r\n            type : cc.Node\r\n        },\r\n        cow_ins:{\r\n            default: null,\r\n            type:cc.Node\r\n        },\r\n        rope_imgs:{\r\n            default:[],\r\n            type:cc.SpriteFrame\r\n        },\r\n\r\n        //再绑定一个预制体\r\n        cow_prefab:{\r\n            default:null,\r\n            type:cc.Prefab\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n\r\n    //点击事件捕捉函数\r\n    clickCapture:function (event,customEventDate){\r\n        this.rope_node.active=true;\r\n        //设置绳子在当前父节点的顺序\r\n        this.rope_node.setSiblingIndex(100);\r\n\r\n        //设置绳子的起始位置\r\n        this.rope_node.y=-500;\r\n        //向上移动\r\n        const up=cc.moveTo(0.4,this.rope_node.x,0);\r\n\r\n\r\n        //判定结果\r\n        let result=cc.callFunc(function(){\r\n            //获取当前牛儿的x点\r\n            let currentX=this.cow_ins.x;\r\n            if(currentX>-80&&currentX<80){\r\n                cc.log(\"捕捉成功！\");\r\n\r\n                //移除\r\n                let bgNode = this.node.getChildByName(\"bg-Sprite\");\r\n                bgNode.removeChild(this.cow_ins);\r\n\r\n                //更换绳子,获取牛儿的类型\r\n                let ropeType=this.cow_ins.getComponent(\"cow\").randomType+1;\r\n                this.rope_node.getComponent(cc.Sprite).spriteFrame=this.rope_imgs[ropeType];\r\n\r\n\r\n                //生成新的牛节点\r\n                this.cow_ins=cc.instantiate(this.cow_prefab);\r\n                this.cow_ins.y=0;\r\n                bgNode.addChild(this.cow_ins);\r\n\r\n\r\n            }\r\n            else{\r\n                cc.log(\"捕捉失败！\");\r\n            }\r\n        },this);\r\n\r\n        //往回拉\r\n        let down=cc.moveTo(0.5,this.rope_node.x,-500);\r\n\r\n        let finish=cc.callFunc(function (){\r\n            this.rope_node.getComponent(cc.Sprite).spriteFrame=this.rope_imgs[0];\r\n\r\n        },this)\r\n\r\n\r\n\r\n        //定义一个序列动画\r\n        let sequence=cc.sequence(up,result,down,finish);\r\n\r\n        this.rope_node.runAction(sequence);\r\n    }\r\n\r\n});\r\n"]}